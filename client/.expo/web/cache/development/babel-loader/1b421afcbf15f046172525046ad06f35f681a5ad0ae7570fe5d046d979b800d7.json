{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useTheme } from \"../theme/ThemeContext\";\nimport VideoCard from \"../components/video/VideoCard\";\nimport { getVideos } from \"../services/api\";\nimport { handleApiError } from \"../services/api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar HomeScreen = function HomeScreen() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    videos = _useState2[0],\n    setVideos = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    refreshing = _useState6[0],\n    setRefreshing = _useState6[1];\n  var _useState7 = useState(1),\n    _useState8 = _slicedToArray(_useState7, 2),\n    page = _useState8[0],\n    setPage = _useState8[1];\n  var _useState9 = useState(true),\n    _useState0 = _slicedToArray(_useState9, 2),\n    hasMore = _useState0[0],\n    setHasMore = _useState0[1];\n  var _useTheme = useTheme(),\n    theme = _useTheme.theme;\n  var loadVideos = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var pageNum = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var shouldRefresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      try {\n        var response = yield getVideos(pageNum);\n        var newVideos = response.videos;\n        if (shouldRefresh) {\n          setVideos(newVideos);\n        } else {\n          setVideos(function (prevVideos) {\n            return [].concat(_toConsumableArray(prevVideos), _toConsumableArray(newVideos));\n          });\n        }\n        setHasMore(pageNum < response.pages);\n        setPage(pageNum);\n      } catch (error) {\n        handleApiError(error);\n      } finally {\n        setLoading(false);\n        setRefreshing(false);\n      }\n    });\n    return function loadVideos() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    loadVideos();\n  }, []);\n  var handleRefresh = function handleRefresh() {\n    setRefreshing(true);\n    loadVideos(1, true);\n  };\n  var handleLoadMore = function handleLoadMore() {\n    if (!loading && hasMore) {\n      loadVideos(page + 1);\n    }\n  };\n  var renderFooter = function renderFooter() {\n    if (!loading) return null;\n    return _jsx(View, {\n      style: styles.footer,\n      children: _jsx(ActivityIndicator, {\n        size: \"large\",\n        color: theme.primary\n      })\n    });\n  };\n  return _jsx(View, {\n    style: [styles.container, {\n      backgroundColor: theme.background\n    }],\n    children: _jsx(FlatList, {\n      data: videos,\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item;\n        return _jsx(VideoCard, {\n          video: item\n        });\n      },\n      keyExtractor: function keyExtractor(item) {\n        return item._id;\n      },\n      onEndReached: handleLoadMore,\n      onEndReachedThreshold: 0.5,\n      ListFooterComponent: renderFooter,\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: refreshing,\n        onRefresh: handleRefresh,\n        colors: [theme.primary],\n        tintColor: theme.primary\n      })\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  footer: {\n    paddingVertical: 20,\n    alignItems: 'center'\n  }\n});\nexport default HomeScreen;","map":{"version":3,"names":["React","useState","useEffect","View","StyleSheet","FlatList","RefreshControl","ActivityIndicator","useTheme","VideoCard","getVideos","handleApiError","jsx","_jsx","HomeScreen","_useState","_useState2","_slicedToArray","videos","setVideos","_useState3","_useState4","loading","setLoading","_useState5","_useState6","refreshing","setRefreshing","_useState7","_useState8","page","setPage","_useState9","_useState0","hasMore","setHasMore","_useTheme","theme","loadVideos","_ref","_asyncToGenerator","pageNum","arguments","length","undefined","shouldRefresh","response","newVideos","prevVideos","concat","_toConsumableArray","pages","error","apply","handleRefresh","handleLoadMore","renderFooter","style","styles","footer","children","size","color","primary","container","backgroundColor","background","data","renderItem","_ref2","item","video","keyExtractor","_id","onEndReached","onEndReachedThreshold","ListFooterComponent","refreshControl","onRefresh","colors","tintColor","create","flex","paddingVertical","alignItems"],"sources":["C:/Users/A R Khan/OneDrive/Documents/Trae/Joy-Hacks/client/src/screens/HomeScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  FlatList,\r\n  RefreshControl,\r\n  ActivityIndicator,\r\n} from 'react-native';\r\nimport { useTheme } from '../theme/ThemeContext';\r\nimport VideoCard from '../components/video/VideoCard';\r\nimport { getVideos } from '../services/api';\r\nimport { handleApiError } from '../services/api';\r\n\r\nconst HomeScreen = () => {\r\n  const [videos, setVideos] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const { theme } = useTheme();\r\n\r\n  const loadVideos = async (pageNum = 1, shouldRefresh = false) => {\r\n    try {\r\n      const response = await getVideos(pageNum);\r\n      const newVideos = response.videos;\r\n      \r\n      if (shouldRefresh) {\r\n        setVideos(newVideos);\r\n      } else {\r\n        setVideos((prevVideos) => [...prevVideos, ...newVideos]);\r\n      }\r\n      \r\n      setHasMore(pageNum < response.pages);\r\n      setPage(pageNum);\r\n    } catch (error) {\r\n      handleApiError(error);\r\n    } finally {\r\n      setLoading(false);\r\n      setRefreshing(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadVideos();\r\n  }, []);\r\n\r\n  const handleRefresh = () => {\r\n    setRefreshing(true);\r\n    loadVideos(1, true);\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    if (!loading && hasMore) {\r\n      loadVideos(page + 1);\r\n    }\r\n  };\r\n\r\n  const renderFooter = () => {\r\n    if (!loading) return null;\r\n    return (\r\n      <View style={styles.footer}>\r\n        <ActivityIndicator size=\"large\" color={theme.primary} />\r\n      </View>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <View style={[styles.container, { backgroundColor: theme.background }]}>\r\n      <FlatList\r\n        data={videos}\r\n        renderItem={({ item }) => <VideoCard video={item} />}\r\n        keyExtractor={(item) => item._id}\r\n        onEndReached={handleLoadMore}\r\n        onEndReachedThreshold={0.5}\r\n        ListFooterComponent={renderFooter}\r\n        refreshControl={\r\n          <RefreshControl\r\n            refreshing={refreshing}\r\n            onRefresh={handleRefresh}\r\n            colors={[theme.primary]}\r\n            tintColor={theme.primary}\r\n          />\r\n        }\r\n      />\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  footer: {\r\n    paddingVertical: 20,\r\n    alignItems: 'center',\r\n  },\r\n});\r\n\r\nexport default HomeScreen; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}