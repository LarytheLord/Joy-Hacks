{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Camera } from 'expo-camera';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { useTheme } from \"../../theme/ThemeContext\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar VideoRecorder = function VideoRecorder(_ref) {\n  var onRecordingComplete = _ref.onRecordingComplete;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isRecording = _useState4[0],\n    setIsRecording = _useState4[1];\n  var _useState5 = useState(0),\n    _useState6 = _slicedToArray(_useState5, 2),\n    duration = _useState6[0],\n    setDuration = _useState6[1];\n  var cameraRef = useRef(null);\n  var timerRef = useRef(null);\n  var _useTheme = useTheme(),\n    theme = _useTheme.theme;\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var _yield$Camera$request = yield Camera.requestCameraPermissionsAsync(),\n        status = _yield$Camera$request.status;\n      var audioStatus = yield Camera.requestMicrophonePermissionsAsync();\n      setHasPermission(status === 'granted' && audioStatus.status === 'granted');\n    })();\n    return function () {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, []);\n  var startRecording = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (cameraRef.current) {\n        try {\n          setIsRecording(true);\n          var video = yield cameraRef.current.recordAsync({\n            maxDuration: 60,\n            quality: Camera.Constants.VideoQuality['720p']\n          });\n          onRecordingComplete(video);\n        } catch (error) {\n          Alert.alert('Error', 'Failed to record video');\n        } finally {\n          setIsRecording(false);\n          setDuration(0);\n        }\n      }\n    });\n    return function startRecording() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var stopRecording = function stopRecording() {\n    if (cameraRef.current && isRecording) {\n      cameraRef.current.stopRecording();\n      setIsRecording(false);\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    }\n  };\n  var formatTime = function formatTime(seconds) {\n    var mins = Math.floor(seconds / 60);\n    var secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  if (hasPermission === null) {\n    return _jsx(View, {\n      style: styles.container\n    });\n  }\n  if (hasPermission === false) {\n    return _jsx(View, {\n      style: styles.container,\n      children: _jsx(Text, {\n        style: [styles.text, {\n          color: theme.text\n        }],\n        children: \"No access to camera\"\n      })\n    });\n  }\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(Camera, {\n      ref: cameraRef,\n      style: styles.camera,\n      type: Camera.Constants.Type.back,\n      children: _jsxs(View, {\n        style: styles.overlay,\n        children: [isRecording && _jsx(View, {\n          style: styles.timerContainer,\n          children: _jsx(Text, {\n            style: [styles.timer, {\n              color: theme.text\n            }],\n            children: formatTime(duration)\n          })\n        }), _jsx(View, {\n          style: styles.buttonContainer,\n          children: _jsx(TouchableOpacity, {\n            style: [styles.recordButton, isRecording && styles.recordingButton, {\n              backgroundColor: theme.primary\n            }],\n            onPress: isRecording ? stopRecording : startRecording,\n            children: _jsx(MaterialIcons, {\n              name: isRecording ? 'stop' : 'fiber-manual-record',\n              size: 32,\n              color: \"white\"\n            })\n          })\n        })]\n      })\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: 'black'\n  },\n  camera: {\n    flex: 1\n  },\n  overlay: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    justifyContent: 'flex-end'\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginBottom: 30\n  },\n  recordButton: {\n    width: 70,\n    height: 70,\n    borderRadius: 35,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  recordingButton: {\n    backgroundColor: 'red'\n  },\n  timerContainer: {\n    position: 'absolute',\n    top: 40,\n    alignSelf: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    padding: 10,\n    borderRadius: 20\n  },\n  timer: {\n    fontSize: 18,\n    fontWeight: 'bold'\n  },\n  text: {\n    fontSize: 16,\n    textAlign: 'center'\n  }\n});\nexport default VideoRecorder;","map":{"version":3,"names":["React","useState","useRef","useEffect","View","StyleSheet","TouchableOpacity","Text","Alert","Camera","MaterialIcons","useTheme","jsx","_jsx","jsxs","_jsxs","VideoRecorder","_ref","onRecordingComplete","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","_useState4","isRecording","setIsRecording","_useState5","_useState6","duration","setDuration","cameraRef","timerRef","_useTheme","theme","_asyncToGenerator","_yield$Camera$request","requestCameraPermissionsAsync","status","audioStatus","requestMicrophonePermissionsAsync","current","clearInterval","startRecording","_ref3","video","recordAsync","maxDuration","quality","Constants","VideoQuality","error","alert","apply","arguments","stopRecording","formatTime","seconds","mins","Math","floor","secs","toString","padStart","style","styles","container","children","text","color","ref","camera","type","Type","back","overlay","timerContainer","timer","buttonContainer","recordButton","recordingButton","backgroundColor","primary","onPress","name","size","create","flex","justifyContent","flexDirection","marginBottom","width","height","borderRadius","alignItems","position","top","alignSelf","padding","fontSize","fontWeight","textAlign"],"sources":["C:/Users/A R Khan/OneDrive/Documents/Trae/Joy-Hacks/client/src/components/video/VideoRecorder.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { View, StyleSheet, TouchableOpacity, Text, Alert } from 'react-native';\r\nimport { Camera } from 'expo-camera';\r\nimport { MaterialIcons } from '@expo/vector-icons';\r\nimport { useTheme } from '../../theme/ThemeContext';\r\n\r\nconst VideoRecorder = ({ onRecordingComplete }) => {\r\n  const [hasPermission, setHasPermission] = useState(null);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [duration, setDuration] = useState(0);\r\n  const cameraRef = useRef(null);\r\n  const timerRef = useRef(null);\r\n  const { theme } = useTheme();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { status } = await Camera.requestCameraPermissionsAsync();\r\n      const audioStatus = await Camera.requestMicrophonePermissionsAsync();\r\n      setHasPermission(status === 'granted' && audioStatus.status === 'granted');\r\n    })();\r\n\r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const startRecording = async () => {\r\n    if (cameraRef.current) {\r\n      try {\r\n        setIsRecording(true);\r\n        const video = await cameraRef.current.recordAsync({\r\n          maxDuration: 60,\r\n          quality: Camera.Constants.VideoQuality['720p'],\r\n        });\r\n        onRecordingComplete(video);\r\n      } catch (error) {\r\n        Alert.alert('Error', 'Failed to record video');\r\n      } finally {\r\n        setIsRecording(false);\r\n        setDuration(0);\r\n      }\r\n    }\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    if (cameraRef.current && isRecording) {\r\n      cameraRef.current.stopRecording();\r\n      setIsRecording(false);\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n    }\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  if (hasPermission === null) {\r\n    return <View style={styles.container} />;\r\n  }\r\n\r\n  if (hasPermission === false) {\r\n    return (\r\n      <View style={styles.container}>\r\n        <Text style={[styles.text, { color: theme.text }]}>\r\n          No access to camera\r\n        </Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Camera\r\n        ref={cameraRef}\r\n        style={styles.camera}\r\n        type={Camera.Constants.Type.back}\r\n      >\r\n        <View style={styles.overlay}>\r\n          {isRecording && (\r\n            <View style={styles.timerContainer}>\r\n              <Text style={[styles.timer, { color: theme.text }]}>\r\n                {formatTime(duration)}\r\n              </Text>\r\n            </View>\r\n          )}\r\n          <View style={styles.buttonContainer}>\r\n            <TouchableOpacity\r\n              style={[\r\n                styles.recordButton,\r\n                isRecording && styles.recordingButton,\r\n                { backgroundColor: theme.primary }\r\n              ]}\r\n              onPress={isRecording ? stopRecording : startRecording}\r\n            >\r\n              <MaterialIcons\r\n                name={isRecording ? 'stop' : 'fiber-manual-record'}\r\n                size={32}\r\n                color=\"white\"\r\n              />\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </Camera>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: 'black',\r\n  },\r\n  camera: {\r\n    flex: 1,\r\n  },\r\n  overlay: {\r\n    flex: 1,\r\n    backgroundColor: 'transparent',\r\n    justifyContent: 'flex-end',\r\n  },\r\n  buttonContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    marginBottom: 30,\r\n  },\r\n  recordButton: {\r\n    width: 70,\r\n    height: 70,\r\n    borderRadius: 35,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  recordingButton: {\r\n    backgroundColor: 'red',\r\n  },\r\n  timerContainer: {\r\n    position: 'absolute',\r\n    top: 40,\r\n    alignSelf: 'center',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n    padding: 10,\r\n    borderRadius: 20,\r\n  },\r\n  timer: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n  },\r\n  text: {\r\n    fontSize: 16,\r\n    textAlign: 'center',\r\n  },\r\n});\r\n\r\nexport default VideoRecorder; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,gBAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,KAAA;AAE3D,SAASC,MAAM,QAAQ,aAAa;AACpC,SAASC,aAAa,QAAQ,oBAAoB;AAClD,SAASC,QAAQ;AAAmC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAEpD,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAAC,IAAA,EAAgC;EAAA,IAA1BC,mBAAmB,GAAAD,IAAA,CAAnBC,mBAAmB;EAC1C,IAAAC,SAAA,GAA0ClB,QAAQ,CAAC,IAAI,CAAC;IAAAmB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAjDG,aAAa,GAAAF,UAAA;IAAEG,gBAAgB,GAAAH,UAAA;EACtC,IAAAI,UAAA,GAAsCvB,QAAQ,CAAC,KAAK,CAAC;IAAAwB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA9CE,WAAW,GAAAD,UAAA;IAAEE,cAAc,GAAAF,UAAA;EAClC,IAAAG,UAAA,GAAgC3B,QAAQ,CAAC,CAAC,CAAC;IAAA4B,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAApCE,QAAQ,GAAAD,UAAA;IAAEE,WAAW,GAAAF,UAAA;EAC5B,IAAMG,SAAS,GAAG9B,MAAM,CAAC,IAAI,CAAC;EAC9B,IAAM+B,QAAQ,GAAG/B,MAAM,CAAC,IAAI,CAAC;EAC7B,IAAAgC,SAAA,GAAkBvB,QAAQ,CAAC,CAAC;IAApBwB,KAAK,GAAAD,SAAA,CAALC,KAAK;EAEbhC,SAAS,CAAC,YAAM;IACdiC,iBAAA,CAAC,aAAY;MACX,IAAAC,qBAAA,SAAyB5B,MAAM,CAAC6B,6BAA6B,CAAC,CAAC;QAAvDC,MAAM,GAAAF,qBAAA,CAANE,MAAM;MACd,IAAMC,WAAW,SAAS/B,MAAM,CAACgC,iCAAiC,CAAC,CAAC;MACpElB,gBAAgB,CAACgB,MAAM,KAAK,SAAS,IAAIC,WAAW,CAACD,MAAM,KAAK,SAAS,CAAC;IAC5E,CAAC,EAAE,CAAC;IAEJ,OAAO,YAAM;MACX,IAAIN,QAAQ,CAACS,OAAO,EAAE;QACpBC,aAAa,CAACV,QAAQ,CAACS,OAAO,CAAC;MACjC;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,IAAME,cAAc;IAAA,IAAAC,KAAA,GAAAT,iBAAA,CAAG,aAAY;MACjC,IAAIJ,SAAS,CAACU,OAAO,EAAE;QACrB,IAAI;UACFf,cAAc,CAAC,IAAI,CAAC;UACpB,IAAMmB,KAAK,SAASd,SAAS,CAACU,OAAO,CAACK,WAAW,CAAC;YAChDC,WAAW,EAAE,EAAE;YACfC,OAAO,EAAExC,MAAM,CAACyC,SAAS,CAACC,YAAY,CAAC,MAAM;UAC/C,CAAC,CAAC;UACFjC,mBAAmB,CAAC4B,KAAK,CAAC;QAC5B,CAAC,CAAC,OAAOM,KAAK,EAAE;UACd5C,KAAK,CAAC6C,KAAK,CAAC,OAAO,EAAE,wBAAwB,CAAC;QAChD,CAAC,SAAS;UACR1B,cAAc,CAAC,KAAK,CAAC;UACrBI,WAAW,CAAC,CAAC,CAAC;QAChB;MACF;IACF,CAAC;IAAA,gBAhBKa,cAAcA,CAAA;MAAA,OAAAC,KAAA,CAAAS,KAAA,OAAAC,SAAA;IAAA;EAAA,GAgBnB;EAED,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;IAC1B,IAAIxB,SAAS,CAACU,OAAO,IAAIhB,WAAW,EAAE;MACpCM,SAAS,CAACU,OAAO,CAACc,aAAa,CAAC,CAAC;MACjC7B,cAAc,CAAC,KAAK,CAAC;MACrB,IAAIM,QAAQ,CAACS,OAAO,EAAE;QACpBC,aAAa,CAACV,QAAQ,CAACS,OAAO,CAAC;MACjC;IACF;EACF,CAAC;EAED,IAAMe,UAAU,GAAG,SAAbA,UAAUA,CAAIC,OAAO,EAAK;IAC9B,IAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,GAAG,EAAE,CAAC;IACrC,IAAMI,IAAI,GAAGJ,OAAO,GAAG,EAAE;IACzB,OAAO,GAAGC,IAAI,IAAIG,IAAI,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;EACtD,CAAC;EAED,IAAI1C,aAAa,KAAK,IAAI,EAAE;IAC1B,OAAOT,IAAA,CAACT,IAAI;MAAC6D,KAAK,EAAEC,MAAM,CAACC;IAAU,CAAE,CAAC;EAC1C;EAEA,IAAI7C,aAAa,KAAK,KAAK,EAAE;IAC3B,OACET,IAAA,CAACT,IAAI;MAAC6D,KAAK,EAAEC,MAAM,CAACC,SAAU;MAAAC,QAAA,EAC5BvD,IAAA,CAACN,IAAI;QAAC0D,KAAK,EAAE,CAACC,MAAM,CAACG,IAAI,EAAE;UAAEC,KAAK,EAAEnC,KAAK,CAACkC;QAAK,CAAC,CAAE;QAAAD,QAAA,EAAC;MAEnD,CAAM;IAAC,CACH,CAAC;EAEX;EAEA,OACEvD,IAAA,CAACT,IAAI;IAAC6D,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAC,QAAA,EAC5BvD,IAAA,CAACJ,MAAM;MACL8D,GAAG,EAAEvC,SAAU;MACfiC,KAAK,EAAEC,MAAM,CAACM,MAAO;MACrBC,IAAI,EAAEhE,MAAM,CAACyC,SAAS,CAACwB,IAAI,CAACC,IAAK;MAAAP,QAAA,EAEjCrD,KAAA,CAACX,IAAI;QAAC6D,KAAK,EAAEC,MAAM,CAACU,OAAQ;QAAAR,QAAA,GACzB1C,WAAW,IACVb,IAAA,CAACT,IAAI;UAAC6D,KAAK,EAAEC,MAAM,CAACW,cAAe;UAAAT,QAAA,EACjCvD,IAAA,CAACN,IAAI;YAAC0D,KAAK,EAAE,CAACC,MAAM,CAACY,KAAK,EAAE;cAAER,KAAK,EAAEnC,KAAK,CAACkC;YAAK,CAAC,CAAE;YAAAD,QAAA,EAChDX,UAAU,CAAC3B,QAAQ;UAAC,CACjB;QAAC,CACH,CACP,EACDjB,IAAA,CAACT,IAAI;UAAC6D,KAAK,EAAEC,MAAM,CAACa,eAAgB;UAAAX,QAAA,EAClCvD,IAAA,CAACP,gBAAgB;YACf2D,KAAK,EAAE,CACLC,MAAM,CAACc,YAAY,EACnBtD,WAAW,IAAIwC,MAAM,CAACe,eAAe,EACrC;cAAEC,eAAe,EAAE/C,KAAK,CAACgD;YAAQ,CAAC,CAClC;YACFC,OAAO,EAAE1D,WAAW,GAAG8B,aAAa,GAAGZ,cAAe;YAAAwB,QAAA,EAEtDvD,IAAA,CAACH,aAAa;cACZ2E,IAAI,EAAE3D,WAAW,GAAG,MAAM,GAAG,qBAAsB;cACnD4D,IAAI,EAAE,EAAG;cACThB,KAAK,EAAC;YAAO,CACd;UAAC,CACc;QAAC,CACf,CAAC;MAAA,CACH;IAAC,CACD;EAAC,CACL,CAAC;AAEX,CAAC;AAED,IAAMJ,MAAM,GAAG7D,UAAU,CAACkF,MAAM,CAAC;EAC/BpB,SAAS,EAAE;IACTqB,IAAI,EAAE,CAAC;IACPN,eAAe,EAAE;EACnB,CAAC;EACDV,MAAM,EAAE;IACNgB,IAAI,EAAE;EACR,CAAC;EACDZ,OAAO,EAAE;IACPY,IAAI,EAAE,CAAC;IACPN,eAAe,EAAE,aAAa;IAC9BO,cAAc,EAAE;EAClB,CAAC;EACDV,eAAe,EAAE;IACfW,aAAa,EAAE,KAAK;IACpBD,cAAc,EAAE,QAAQ;IACxBE,YAAY,EAAE;EAChB,CAAC;EACDX,YAAY,EAAE;IACZY,KAAK,EAAE,EAAE;IACTC,MAAM,EAAE,EAAE;IACVC,YAAY,EAAE,EAAE;IAChBL,cAAc,EAAE,QAAQ;IACxBM,UAAU,EAAE;EACd,CAAC;EACDd,eAAe,EAAE;IACfC,eAAe,EAAE;EACnB,CAAC;EACDL,cAAc,EAAE;IACdmB,QAAQ,EAAE,UAAU;IACpBC,GAAG,EAAE,EAAE;IACPC,SAAS,EAAE,QAAQ;IACnBhB,eAAe,EAAE,oBAAoB;IACrCiB,OAAO,EAAE,EAAE;IACXL,YAAY,EAAE;EAChB,CAAC;EACDhB,KAAK,EAAE;IACLsB,QAAQ,EAAE,EAAE;IACZC,UAAU,EAAE;EACd,CAAC;EACDhC,IAAI,EAAE;IACJ+B,QAAQ,EAAE,EAAE;IACZE,SAAS,EAAE;EACb;AACF,CAAC,CAAC;AAEF,eAAetF,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}